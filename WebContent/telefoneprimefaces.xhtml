<?xml version="1.0" encoding="UTF-8" ?>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>Login</title>
</h:head>

<h:body>
	
	<h:form>
		<p:breadCrumb>
			<p:menuitem/>
			<p:menuitem value="Index JSF" action="index.jsf"/>
			<p:menuitem value="Index Prime" action="indexjsf.jsf"/>
		</p:breadCrumb>
	</h:form>
	
	<h:form id="formulario">
		<p:growl autoUpdate="true" showDetail="true" />
		<h:panelGrid columns="2">
			<p:outputLabel>Usuário:</p:outputLabel>
			<p:outputLabel value="#{telefoneManegedBean.user.nome}"/>
			
			<p:outputLabel>Número:</p:outputLabel>
			<p:inputMask value="#{telefoneManegedBean.telefone.numero}" mask="(99) 9 9999-9999"/>
			
			<p:outputLabel>Tipo:</p:outputLabel>
			<p:selectOneMenu value="#{telefoneManegedBean.telefone.tipo}">
				<f:selectItem itemValue="RECADO" itemLabel="Recado"/>
				<f:selectItem itemValue="TRABALHO" itemLabel="Trabalho"/>
				<f:selectItem itemValue="RESIDENCIAL" itemLabel="Residencial"/>
			</p:selectOneMenu>
			
			<br/>
			<br/>
			
			<p:commandButton value="Salvar" action="#{telefoneManegedBean.salvar}" ajax="false"/>
		</h:panelGrid>
	</h:form>
	 
	<h:form id="formTelefone">
			<p:dataTable value="#{telefoneManegedBean.user.telefoneUsers}" var="telefones">
				<p:column headerText="ID" style="width:20">
					<center>
						<h:outputText value="#{telefones.id}"/>
					</center>
				</p:column>
				
				<p:column headerText="Número">
					<center>
						<h:outputText value="#{telefones.numero}"/>
					</center>
				</p:column>
				
				<p:column headerText="Tipo" style="width:200">
					<center>
					<h:outputText value="#{telefones.tipo}"/>
					</center>
				</p:column>
				
				<p:column headerText="Excluir" style="width:100">
					<center>
						<h:commandLink action="#{telefoneManegedBean.remover}" id="btnExcluir">
							<h:graphicImage url="resources/img/delete.png"/>
							<f:setPropertyActionListener value="#{telefones}" target="#{telefoneManegedBean.telefone}"/>
							<f:ajax execute="btnExcluir" render="@form"></f:ajax>
						</h:commandLink>
					</center>	
				</p:column>
				
			</p:dataTable>
	</h:form>
	
</h:body>

</html>